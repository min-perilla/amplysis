% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/taxa_bar.R
\name{taxa_bar}
\alias{taxa_bar}
\title{Species Composition Analysis}
\usage{
taxa_bar(
  otu,
  tax,
  metadata,
  id_col = 1,
  tax_cla = "phylum",
  group1 = "group",
  group2 = NULL,
  parallel_method = "mean",
  row_n = 8
)
}
\arguments{
\item{otu}{otu table}

\item{tax}{tax table}

\item{metadata}{metadata table containing grouping information.}

\item{id_col}{(integer)The column number of the OTU ID column in the
OTU table, by default, is 1.}

\item{tax_cla}{(character) Taxonomic level. Only column names from the tax
table can be entered, for example tax_cla = 'genus'.}

\item{group1}{(Required, character) Group 1, please enter the column name of
the grouping information in the metadata table.}

\item{group2}{(Optional, character) Group 2 for facetting plots, please enter
the column name of the grouping information in the metadata table.}

\item{parallel_method}{(character) Parallel sample processing method,
defaulting to mean. Options: mean (average), sum (summation), median (median).}

\item{row_n}{(integer) Preserve the top N taxa (including the Nth) based on
abundance, while merging taxa with lower abundance into "others".}
}
\value{
Species composition analysis dataframe
}
\description{
To perform species composition analysis, you will need three files:
\enumerate{
\item OTU table (containing abundance information);
\item Taxonomy table (containing species annotation information);
\item Metadata table (containing grouping information).
This function undergoes a series of processing steps,
such as clustering based on specified taxonomic levels using column numbers
or names from the tax table, to generate a dataframe directly usable for
ggplot2 plotting. For quick plotting, you can use the built-in
\code{taxa_bar_plot()} function to generate high-quality plots efficiently.
}
}
\details{
Parameter \code{tax_cla} explanation:
This parameter is used to specify which taxonomic level from the tax table to
merge the OTU table. It can be specified either by column name. For example,
tax_cla = "genus".

An example:
taxa_bar(otu = otu,                 # OTU table
tax = tax,                 # TAX table
metadata = metadata,       # metadata table
id_col = 1,                # There exists an OTU ID column (the first column).
tax_cla = "genus",         # Cluster according to the "genus" column in the tax table.
parallel_method = "mean",  # Parallel sample processing method: mean
row_n = 20)                # Preserve the top 20 taxa based on abundance,
# and group the rest into "others".
}
\examples{
\dontrun{taxa_bar(otu = otu, tax = tax, metadata = metadata, id_col = 1,
group1 = "group", group2 = "group2", tax_cla = "genus", parallel_method = "mean", row_n = 20)}

}
